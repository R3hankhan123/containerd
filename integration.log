integration
âœ–  integration/client (6m49.524s)

=== Skipped
=== SKIP: integration/client TestDaemonCustomCgroup (0.00s)
    daemon_config_linux_test.go:126: test requires cgroup1

=== Failed
=== FAIL: integration/client TestRestartMonitor/Always (0.10s)
    log_hook.go:47: time="2025-08-19T15:05:50.337713948Z" level=debug msg="remote introspection plugin filters" func="proxy.(*introspectionRemote).Plugins" file="/home/runner/work/containerd/containerd/core/introspection/proxy/remote.go:59" filters="[type==io.containerd.snapshotter.v1, id==overlayfs]" testcase=TestRestartMonitor/Always
    restart_monitor_test.go:210: process already finished: not found
    restart_monitor_test.go:196: failed to delete task: task TestRestartMonitor_Always not found
    --- FAIL: TestRestartMonitor/Always (0.10s)

=== FAIL: integration/client TestRestartMonitor (40.19s)
    log_hook.go:47: time="2025-08-19T15:05:45.865621160Z" level=debug msg=resolving func="docker.(*dockerResolver).Resolve" file="/home/runner/work/containerd/containerd/core/remotes/docker/resolver.go:307" host=ghcr.io testcase=TestRestartMonitor
    log_hook.go:47: time="2025-08-19T15:05:45.865827535Z" level=debug msg="do request" func="docker.(*request).do" file="/home/runner/work/containerd/containerd/core/remotes/docker/resolver.go:616" host=ghcr.io request.header.accept="application/vnd.docker.distribution.manifest.v2+json, application/vnd.docker.distribution.manifest.list.v2+json, application/vnd.oci.image.manifest.v1+json, application/vnd.oci.image.index.v1+json, */*" request.header.user-agent=containerd/2.1.0+unknown request.method=HEAD testcase=TestRestartMonitor url="https://ghcr.io/v2/containerd/busybox/manifests/1.36"
    log_hook.go:47: time="2025-08-19T15:05:45.896875148Z" level=debug msg="fetch response received" func="docker.(*request).do" file="/home/runner/work/containerd/containerd/core/remotes/docker/resolver.go:643" host=ghcr.io response.header.content-length=73 response.header.content-type=application/json response.header.date="Tue, 19 Aug 2025 15:05:45 GMT" response.header.www-authenticate="***"https://ghcr.io/token\",service=\"ghcr.io\",scope=\"repository:containerd/busybox:pull\"" response.header.x-github-request-id="F80E:37CFC9:F8ABD6:10CC5C5:68A492C9" response.status="401 Unauthorized" testcase=TestRestartMonitor url="https://ghcr.io/v2/containerd/busybox/manifests/1.36"
    log_hook.go:47: time="2025-08-19T15:05:45.897197449Z" level=debug msg=Unauthorized func="docker.(*request).retryRequest" file="/home/runner/work/containerd/containerd/core/remotes/docker/resolver.go:738" header="***"https://ghcr.io/token\",service=\"ghcr.io\",scope=\"repository:containerd/busybox:pull\"" host=ghcr.io testcase=TestRestartMonitor
    log_hook.go:47: time="2025-08-19T15:05:45.897440442Z" level=debug msg="do request" func="docker.(*request).do" file="/home/runner/work/containerd/containerd/core/remotes/docker/resolver.go:616" host=ghcr.io request.header.accept="application/vnd.docker.distribution.manifest.v2+json, application/vnd.docker.distribution.manifest.list.v2+json, application/vnd.oci.image.manifest.v1+json, application/vnd.oci.image.index.v1+json, */*" request.header.user-agent=containerd/2.1.0+unknown request.method=HEAD testcase=TestRestartMonitor url="https://ghcr.io/v2/containerd/busybox/manifests/1.36"
    log_hook.go:47: time="2025-08-19T15:05:46.400341520Z" level=debug msg="fetch response received" func="docker.(*request).do" file="/home/runner/work/containerd/containerd/core/remotes/docker/resolver.go:643" host=ghcr.io response.header.content-length=2295 response.header.content-type=application/vnd.docker.distribution.manifest.list.v2+json response.header.date="Tue, 19 Aug 2025 15:05:46 GMT" response.header.docker-content-digest="sha256:7b3ccabffc97de872a30dfd234fd972a66d247c8cfc69b0550f276481852627c" response.header.docker-distribution-api-version=registry/2.0 response.header.etag="\"sha256:7b3ccabffc97de872a30dfd234fd972a66d247c8cfc69b0550f276481852627c\"" response.header.strict-transport-security="max-age=63072000; includeSubDomains; preload" response.header.x-github-request-id="F80E:37CFC9:F8AC3E:10CC63D:68A492C9" response.status="200 OK" testcase=TestRestartMonitor url="https://ghcr.io/v2/containerd/busybox/manifests/1.36"
    log_hook.go:47: time="2025-08-19T15:05:46.400796749Z" level=debug msg=resolved func="docker.(*dockerResolver).Resolve" file="/home/runner/work/containerd/containerd/core/remotes/docker/resolver.go:415" desc.digest="sha256:7b3ccabffc97de872a30dfd234fd972a66d247c8cfc69b0550f276481852627c" host=ghcr.io testcase=TestRestartMonitor
    log_hook.go:47: time="2025-08-19T15:05:46.401136593Z" level=debug msg=fetch func=remotes.Fetch file="/home/runner/work/containerd/containerd/core/remotes/handlers.go:115" digest="sha256:7b3ccabffc97de872a30dfd234fd972a66d247c8cfc69b0550f276481852627c" mediatype=application/vnd.docker.distribution.manifest.list.v2+json size=2295 testcase=TestRestartMonitor
    log_hook.go:47: time="2025-08-19T15:05:46.404978348Z" level=debug msg="fetching layer" func=docker.dockerFetcher.open file="/home/runner/work/containerd/containerd/core/remotes/docker/fetcher.go:452" chunk_size=0 digest="sha256:7b3ccabffc97de872a30dfd234fd972a66d247c8cfc69b0550f276481852627c" initial_parallelism=0 mediatype=application/vnd.docker.distribution.manifest.list.v2+json offset=0 parallelism=1 size=2295 testcase=TestRestartMonitor
    log_hook.go:47: time="2025-08-19T15:05:46.405246028Z" level=debug msg="do request" func="docker.(*request).do" file="/home/runner/work/containerd/containerd/core/remotes/docker/resolver.go:616" digest="sha256:7b3ccabffc97de872a30dfd234fd972a66d247c8cfc69b0550f276481852627c" mediatype=application/vnd.docker.distribution.manifest.list.v2+json request.header.accept="application/vnd.docker.distribution.manifest.list.v2+json, */*" request.header.accept-encoding="zstd;q=1.0, gzip;q=0.8, deflate;q=0.5" request.header.user-agent=containerd/2.1.0+unknown request.method=GET size=2295 testcase=TestRestartMonitor url="https://ghcr.io/v2/containerd/busybox/manifests/sha256:7b3ccabffc97de872a30dfd234fd972a66d247c8cfc69b0550f276481852627c"
    log_hook.go:47: time="2025-08-19T15:05:49.941262986Z" level=debug msg="fetch response received" func="docker.(*request).do" file="/home/runner/work/containerd/containerd/core/remotes/docker/resolver.go:643" digest="sha256:7b3ccabffc97de872a30dfd234fd972a66d247c8cfc69b0550f276481852627c" mediatype=application/vnd.docker.distribution.manifest.list.v2+json response.header.content-length=2295 response.header.content-type=application/vnd.docker.distribution.manifest.list.v2+json response.header.date="Tue, 19 Aug 2025 15:05:49 GMT" response.header.docker-content-digest="sha256:7b3ccabffc97de872a30dfd234fd972a66d247c8cfc69b0550f276481852627c" response.header.docker-distribution-api-version=registry/2.0 response.header.etag="\"sha256:7b3ccabffc97de872a30dfd234fd972a66d247c8cfc69b0550f276481852627c\"" response.header.strict-transport-security="max-age=63072000; includeSubDomains; preload" response.header.x-github-request-id="F80F:A5C27:108A7BC:11CBD4B:68A492CA" response.status="200 OK" size=2295 testcase=TestRestartMonitor url="https://ghcr.io/v2/containerd/busybox/manifests/sha256:7b3ccabffc97de872a30dfd234fd972a66d247c8cfc69b0550f276481852627c"
    log_hook.go:47: time="2025-08-19T15:05:49.949759881Z" level=debug msg=fetch func=remotes.Fetch file="/home/runner/work/containerd/containerd/core/remotes/handlers.go:115" digest="sha256:907ca53d7e2947e849b839b1cd258c98fd3916c60f2e6e70c30edbf741ab6754" mediatype=application/vnd.docker.distribution.manifest.v2+json size=528 testcase=TestRestartMonitor
    log_hook.go:47: time="2025-08-19T15:05:49.952527883Z" level=debug msg="fetching layer" func=docker.dockerFetcher.open file="/home/runner/work/containerd/containerd/core/remotes/docker/fetcher.go:452" chunk_size=0 digest="sha256:907ca53d7e2947e849b839b1cd258c98fd3916c60f2e6e70c30edbf741ab6754" initial_parallelism=0 mediatype=application/vnd.docker.distribution.manifest.v2+json offset=0 parallelism=1 size=528 testcase=TestRestartMonitor
    log_hook.go:47: time="2025-08-19T15:05:49.952811762Z" level=debug msg="do request" func="docker.(*request).do" file="/home/runner/work/containerd/containerd/core/remotes/docker/resolver.go:616" digest="sha256:907ca53d7e2947e849b839b1cd258c98fd3916c60f2e6e70c30edbf741ab6754" mediatype=application/vnd.docker.distribution.manifest.v2+json request.header.accept="application/vnd.docker.distribution.manifest.v2+json, */*" request.header.accept-encoding="zstd;q=1.0, gzip;q=0.8, deflate;q=0.5" request.header.user-agent=containerd/2.1.0+unknown request.method=GET size=528 testcase=TestRestartMonitor url="https://ghcr.io/v2/containerd/busybox/manifests/sha256:907ca53d7e2947e849b839b1cd258c98fd3916c60f2e6e70c30edbf741ab6754"
    log_hook.go:47: time="2025-08-19T15:05:49.987099687Z" level=debug msg="fetch response received" func="docker.(*request).do" file="/home/runner/work/containerd/containerd/core/remotes/docker/resolver.go:643" digest="sha256:907ca53d7e2947e849b839b1cd258c98fd3916c60f2e6e70c30edbf741ab6754" mediatype=application/vnd.docker.distribution.manifest.v2+json response.header.content-length=528 response.header.content-type=application/vnd.docker.distribution.manifest.v2+json response.header.date="Tue, 19 Aug 2025 15:05:49 GMT" response.header.docker-content-digest="sha256:907ca53d7e2947e849b839b1cd258c98fd3916c60f2e6e70c30edbf741ab6754" response.header.docker-distribution-api-version=registry/2.0 response.header.etag="\"sha256:907ca53d7e2947e849b839b1cd258c98fd3916c60f2e6e70c30edbf741ab6754\"" response.header.strict-transport-security="max-age=63072000; includeSubDomains; preload" response.header.x-github-request-id="F80F:A5C27:108AC32:11CC206:68A492CD" response.status="200 OK" size=528 testcase=TestRestartMonitor url="https://ghcr.io/v2/containerd/busybox/manifests/sha256:907ca53d7e2947e849b839b1cd258c98fd3916c60f2e6e70c30edbf741ab6754"
    log_hook.go:47: time="2025-08-19T15:05:49.994964624Z" level=debug msg=fetch func=remotes.Fetch file="/home/runner/work/containerd/containerd/core/remotes/handlers.go:115" digest="sha256:66ba00ad3de8677a3fa4bc4ea0fc46ebca0f14db46ca365e7f60833068dd0148" mediatype=application/vnd.docker.container.image.v1+json size=1457 testcase=TestRestartMonitor
    log_hook.go:47: time="2025-08-19T15:05:49.998306880Z" level=debug msg="fetching layer" func=docker.dockerFetcher.open file="/home/runner/work/containerd/containerd/core/remotes/docker/fetcher.go:452" chunk_size=0 digest="sha256:66ba00ad3de8677a3fa4bc4ea0fc46ebca0f14db46ca365e7f60833068dd0148" initial_parallelism=0 mediatype=application/vnd.docker.container.image.v1+json offset=0 parallelism=1 size=1457 testcase=TestRestartMonitor
    log_hook.go:47: time="2025-08-19T15:05:49.998808697Z" level=debug msg="do request" func="docker.(*request).do" file="/home/runner/work/containerd/containerd/core/remotes/docker/resolver.go:616" digest="sha256:66ba00ad3de8677a3fa4bc4ea0fc46ebca0f14db46ca365e7f60833068dd0148" mediatype=application/vnd.docker.container.image.v1+json request.header.accept="application/vnd.docker.container.image.v1+json, */*" request.header.accept-encoding="zstd;q=1.0, gzip;q=0.8, deflate;q=0.5" request.header.user-agent=containerd/2.1.0+unknown request.method=GET size=1457 testcase=TestRestartMonitor url="https://ghcr.io/v2/containerd/busybox/blobs/sha256:66ba00ad3de8677a3fa4bc4ea0fc46ebca0f14db46ca365e7f60833068dd0148"
    log_hook.go:47: time="2025-08-19T15:05:50.048549757Z" level=debug msg="fetch response received" func="docker.(*request).do" file="/home/runner/work/containerd/containerd/core/remotes/docker/resolver.go:643" digest="sha256:66ba00ad3de8677a3fa4bc4ea0fc46ebca0f14db46ca365e7f60833068dd0148" mediatype=application/vnd.docker.container.image.v1+json response.header.accept-ranges=bytes response.header.age=47 response.header.connection=keep-alive response.header.content-disposition= response.header.content-length=1457 response.header.content-type=application/octet-stream response.header.date="Tue, 19 Aug 2025 15:05:50 GMT" response.header.etag="\"0x8DAEE26BB92EFFC\"" response.header.last-modified="Wed, 04 Jan 2023 07:38:54 GMT" response.header.server="Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0" response.header.strict-transport-security="max-age=31536000" response.header.via="1.1 varnish" response.header.x-cache=HIT response.header.x-cache-hits=1 response.header.x-fastly-request-id=98c1f0f9033e341ab1d222e580ea16e4bb1b47ed response.header.x-ms-blob-type=BlockBlob response.header.x-ms-copy-completion-time="Wed, 04 Jan 2023 07:38:54 GMT" response.header.x-ms-copy-id=b9eb33a8-f109-4375-b82b-9569d6bd3e0a response.header.x-ms-copy-progress=1457/1457 response.header.x-ms-copy-status=success response.header.x-ms-creation-time="Wed, 04 Jan 2023 07:38:54 GMT" response.header.x-ms-last-access-time="Mon, 18 Aug 2025 15:53:55 GMT" response.header.x-ms-lease-state=available response.header.x-ms-lease-status=unlocked response.header.x-ms-request-id=5a41acfd-c01e-00af-451a-114782000000 response.header.x-ms-server-encrypted=true response.header.x-ms-version=2025-01-05 response.header.x-served-by=cache-iad-kcgs7200125-IAD response.status="200 OK" size=1457 testcase=TestRestartMonitor url="https://ghcr.io/v2/containerd/busybox/blobs/sha256:66ba00ad3de8677a3fa4bc4ea0fc46ebca0f14db46ca365e7f60833068dd0148"
    log_hook.go:47: time="2025-08-19T15:05:50.057692295Z" level=debug msg=fetch func=remotes.Fetch file="/home/runner/work/containerd/containerd/core/remotes/handlers.go:115" digest="sha256:205dae5015e78dd8c4d302e3db4eb31576fac715b46d099fe09680ba28093a7a" mediatype=application/vnd.docker.image.rootfs.diff.tar.gzip size=2592863 testcase=TestRestartMonitor
    log_hook.go:47: time="2025-08-19T15:05:50.062300825Z" level=debug msg="fetching layer" func=docker.dockerFetcher.open file="/home/runner/work/containerd/containerd/core/remotes/docker/fetcher.go:452" chunk_size=0 digest="sha256:205dae5015e78dd8c4d302e3db4eb31576fac715b46d099fe09680ba28093a7a" initial_parallelism=0 mediatype=application/vnd.docker.image.rootfs.diff.tar.gzip offset=0 parallelism=1 size=2592863 testcase=TestRestartMonitor
    log_hook.go:47: time="2025-08-19T15:05:50.062520975Z" level=debug msg="do request" func="docker.(*request).do" file="/home/runner/work/containerd/containerd/core/remotes/docker/resolver.go:616" digest="sha256:205dae5015e78dd8c4d302e3db4eb31576fac715b46d099fe09680ba28093a7a" mediatype=application/vnd.docker.image.rootfs.diff.tar.gzip request.header.accept="application/vnd.docker.image.rootfs.diff.tar.gzip, */*" request.header.accept-encoding="zstd;q=1.0, gzip;q=0.8, deflate;q=0.5" request.header.user-agent=containerd/2.1.0+unknown request.method=GET size=2592863 testcase=TestRestartMonitor url="https://ghcr.io/v2/containerd/busybox/blobs/sha256:205dae5015e78dd8c4d302e3db4eb31576fac715b46d099fe09680ba28093a7a"
    log_hook.go:47: time="2025-08-19T15:05:50.203768382Z" level=debug msg="fetch response received" func="docker.(*request).do" file="/home/runner/work/containerd/containerd/core/remotes/docker/resolver.go:643" digest="sha256:205dae5015e78dd8c4d302e3db4eb31576fac715b46d099fe09680ba28093a7a" mediatype=application/vnd.docker.image.rootfs.diff.tar.gzip response.header.accept-ranges=bytes response.header.age=47 response.header.connection=keep-alive response.header.content-disposition= response.header.content-length=2592863 response.header.content-type=application/octet-stream response.header.date="Tue, 19 Aug 2025 15:05:50 GMT" response.header.etag="\"0x8DAEE0BC6685A5D\"" response.header.last-modified="Wed, 04 Jan 2023 04:25:56 GMT" response.header.server="Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0" response.header.strict-transport-security="max-age=31536000" response.header.via="1.1 varnish" response.header.x-cache=HIT response.header.x-cache-hits=1 response.header.x-fastly-request-id=898c72153a0284d0fdae063ae698abc85b063484 response.header.x-ms-blob-type=BlockBlob response.header.x-ms-copy-completion-time="Wed, 04 Jan 2023 04:25:56 GMT" response.header.x-ms-copy-id=c861af26-fa7c-4ee9-911e-e97611b9ee5e response.header.x-ms-copy-progress=2592863/2592863 response.header.x-ms-copy-status=success response.header.x-ms-creation-time="Wed, 04 Jan 2023 04:25:56 GMT" response.header.x-ms-last-access-time="Tue, 19 Aug 2025 11:17:45 GMT" response.header.x-ms-lease-state=available response.header.x-ms-lease-status=unlocked response.header.x-ms-request-id=62ca6534-901e-004e-371a-119545000000 response.header.x-ms-server-encrypted=true response.header.x-ms-version=2025-01-05 response.header.x-served-by=cache-iad-kcgs7200125-IAD response.status="200 OK" size=2592863 testcase=TestRestartMonitor url="https://ghcr.io/v2/containerd/busybox/blobs/sha256:205dae5015e78dd8c4d302e3db4eb31576fac715b46d099fe09680ba28093a7a"
    log_hook.go:47: time="2025-08-19T15:05:50.328815143Z" level=debug msg="layer unpacked" func="unpack.(*Unpacker).unpack" file="/home/runner/work/containerd/containerd/core/unpack/unpacker.go:490" duration=274.458914ms layer="sha256:205dae5015e78dd8c4d302e3db4eb31576fac715b46d099fe09680ba28093a7a" testcase=TestRestartMonitor
    log_hook.go:47: time="2025-08-19T15:05:50.329995277Z" level=debug msg="image unpacked" func="unpack.(*Unpacker).unpack" file="/home/runner/work/containerd/containerd/core/unpack/unpacker.go:511" chainID="sha256:b64792c17e4ad443d16b218afb3a8f5d03ca0f4ec49b11c1a7aebe17f6c3c1d2" config="sha256:66ba00ad3de8677a3fa4bc4ea0fc46ebca0f14db46ca365e7f60833068dd0148" duration=276.967521ms testcase=TestRestartMonitor
    restart_monitor_test.go:112: Daemon output:
         time="2025-08-19T15:05:45.369993900Z" level=info msg="starting containerd" revision=261d6637698ccb2a6cb7484cef02cf1294f73dc7 version=261d663
        time="2025-08-19T15:05:45.377206497Z" level=info msg="loading plugin" id=io.containerd.content.v1.content type=io.containerd.content.v1
        time="2025-08-19T15:05:45.377246352Z" level=info msg="loading plugin" id=io.containerd.image-verifier.v1.bindir type=io.containerd.image-verifier.v1
        time="2025-08-19T15:05:45.377256150Z" level=info msg="loading plugin" id=io.containerd.internal.v1.opt type=io.containerd.internal.v1
        time="2025-08-19T15:05:45.377287599Z" level=info msg="loading plugin" id=io.containerd.warning.v1.deprecations type=io.containerd.warning.v1
        time="2025-08-19T15:05:45.377300022Z" level=info msg="loading plugin" id=io.containerd.snapshotter.v1.blockfile type=io.containerd.snapshotter.v1
        time="2025-08-19T15:05:45.377363039Z" level=info msg="skip loading plugin" error="no scratch file generator: skip plugin" id=io.containerd.snapshotter.v1.blockfile type=io.containerd.snapshotter.v1
        time="2025-08-19T15:05:45.377375262Z" level=info msg="loading plugin" id=io.containerd.snapshotter.v1.btrfs type=io.containerd.snapshotter.v1
        time="2025-08-19T15:05:45.377544017Z" level=info msg="skip loading plugin" error="path /tmp/TestRestartMonitor4204381941/001/root/io.containerd.snapshotter.v1.btrfs (ext4) must be a btrfs filesystem to be used with the btrfs snapshotter: skip plugin" id=io.containerd.snapshotter.v1.btrfs type=io.containerd.snapshotter.v1
        time="2025-08-19T15:05:45.377559376Z" level=info msg="loading plugin" id=io.containerd.snapshotter.v1.devmapper type=io.containerd.snapshotter.v1
        time="2025-08-19T15:05:45.377567822Z" level=info msg="skip loading plugin" error="devmapper not configured: skip plugin" id=io.containerd.snapshotter.v1.devmapper type=io.containerd.snapshotter.v1
        time="2025-08-19T15:05:45.377573342Z" level=info msg="loading plugin" id=io.containerd.snapshotter.v1.erofs type=io.containerd.snapshotter.v1
        time="2025-08-19T15:05:45.377709456Z" level=info msg="skip loading plugin" error="EROFS unsupported, please `modprobe erofs`: skip plugin" id=io.containerd.snapshotter.v1.erofs type=io.containerd.snapshotter.v1
        time="2025-08-19T15:05:45.377723502Z" level=info msg="loading plugin" id=io.containerd.snapshotter.v1.native type=io.containerd.snapshotter.v1
        time="2025-08-19T15:05:45.377794084Z" level=info msg="loading plugin" id=io.containerd.snapshotter.v1.overlayfs type=io.containerd.snapshotter.v1
        time="2025-08-19T15:05:45.377975953Z" level=info msg="loading plugin" id=io.containerd.snapshotter.v1.zfs type=io.containerd.snapshotter.v1
        time="2025-08-19T15:05:45.378007562Z" level=info msg="skip loading plugin" error="lstat /tmp/TestRestartMonitor4204381941/001/root/io.containerd.snapshotter.v1.zfs: no such file or directory: skip plugin" id=io.containerd.snapshotter.v1.zfs type=io.containerd.snapshotter.v1
        time="2025-08-19T15:05:45.378017912Z" level=info msg="loading plugin" id=io.containerd.event.v1.exchange type=io.containerd.event.v1
        time="2025-08-19T15:05:45.378042688Z" level=info msg="loading plugin" id=io.containerd.monitor.task.v1.cgroups type=io.containerd.monitor.task.v1
        time="2025-08-19T15:05:45.378259843Z" level=info msg="loading plugin" id=io.containerd.metadata.v1.bolt type=io.containerd.metadata.v1
        time="2025-08-19T15:05:45.378328561Z" level=info msg="metadata content store policy set" policy=shared
        time="2025-08-19T15:05:45.380304025Z" level=info msg="loading plugin" id=io.containerd.gc.v1.scheduler type=io.containerd.gc.v1
        time="2025-08-19T15:05:45.380343950Z" level=info msg="loading plugin" id=io.containerd.differ.v1.erofs type=io.containerd.differ.v1
        time="2025-08-19T15:05:45.380444157Z" level=info msg="skip loading plugin" error="failed to check mkfs.erofs availability: failed to run mkfs.erofs --help: exec: \"mkfs.erofs\": executable file not found in $PATH: skip plugin" id=io.containerd.differ.v1.erofs type=io.containerd.differ.v1
        time="2025-08-19T15:05:45.380463763Z" level=info msg="loading plugin" id=io.containerd.differ.v1.walking type=io.containerd.differ.v1
        time="2025-08-19T15:05:45.380478170Z" level=info msg="loading plugin" id=io.containerd.lease.v1.manager type=io.containerd.lease.v1
        time="2025-08-19T15:05:45.380521531Z" level=info msg="loading plugin" id=io.containerd.service.v1.containers-service type=io.containerd.service.v1
        time="2025-08-19T15:05:45.380545365Z" level=info msg="loading plugin" id=io.containerd.service.v1.content-service type=io.containerd.service.v1
        time="2025-08-19T15:05:45.380573558Z" level=info msg="loading plugin" id=io.containerd.service.v1.diff-service type=io.containerd.service.v1
        time="2025-08-19T15:05:45.380594237Z" level=info msg="loading plugin" id=io.containerd.service.v1.images-service type=io.containerd.service.v1
        time="2025-08-19T15:05:45.380608964Z" level=info msg="loading plugin" id=io.containerd.service.v1.introspection-service type=io.containerd.service.v1
        time="2025-08-19T15:05:45.380638359Z" level=info msg="loading plugin" id=io.containerd.service.v1.namespaces-service type=io.containerd.service.v1
        time="2025-08-19T15:05:45.380657535Z" level=info msg="loading plugin" id=io.containerd.service.v1.snapshots-service type=io.containerd.service.v1
        time="2025-08-19T15:05:45.380668806Z" level=info msg="loading plugin" id=io.containerd.shim.v1.manager type=io.containerd.shim.v1
        time="2025-08-19T15:05:45.380699784Z" level=info msg="loading plugin" id=io.containerd.runtime.v2.task type=io.containerd.runtime.v2
        time="2025-08-19T15:05:45.380830548Z" level=info msg="loading plugin" id=io.containerd.service.v1.tasks-service type=io.containerd.service.v1
        time="2025-08-19T15:05:45.380857278Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.containers type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.380875642Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.content type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.380923060Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.diff type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.380941705Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.events type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.380955561Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.images type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.380987120Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.introspection type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.381005835Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.leases type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.381020202Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.namespaces type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.381058523Z" level=info msg="loading plugin" id=io.containerd.sandbox.store.v1.local type=io.containerd.sandbox.store.v1
        time="2025-08-19T15:05:45.381074833Z" level=info msg="loading plugin" id=io.containerd.transfer.v1.local type=io.containerd.transfer.v1
        time="2025-08-19T15:05:45.381119807Z" level=info msg="loading plugin" id=io.containerd.cri.v1.images type=io.containerd.cri.v1
        time="2025-08-19T15:05:45.381165162Z" level=info msg="Get image filesystem path \"/tmp/TestRestartMonitor4204381941/001/root/io.containerd.snapshotter.v1.overlayfs\" for snapshotter \"overlayfs\""
        time="2025-08-19T15:05:45.381196170Z" level=info msg="Start snapshots syncer"
        time="2025-08-19T15:05:45.381244891Z" level=info msg="loading plugin" id=io.containerd.cri.v1.runtime type=io.containerd.cri.v1
        time="2025-08-19T15:05:45.381445134Z" level=info msg="starting cri plugin" config="{\"containerd\":{\"defaultRuntimeName\":\"runc\",\"runtimes\":{\"runc\":{\"runtimeType\":\"io.containerd.runc.v2\",\"runtimePath\":\"\",\"PodAnnotations\":null,\"ContainerAnnotations\":null,\"options\":{\"BinaryName\":\"\",\"CriuImagePath\":\"\",\"CriuWorkPath\":\"\",\"IoGid\":0,\"IoUid\":0,\"NoNewKeyring\":false,\"Root\":\"\",\"ShimCgroup\":\"\"},\"privileged_without_host_devices\":false,\"privileged_without_host_devices_all_devices_allowed\":false,\"cgroupWritable\":false,\"baseRuntimeSpec\":\"\",\"cniConfDir\":\"\",\"cniMaxConfNum\":0,\"snapshotter\":\"\",\"sandboxer\":\"podsandbox\",\"io_type\":\"\"}},\"ignoreBlockIONotEnabledErrors\":false,\"ignoreRdtNotEnabledErrors\":false},\"cni\":{\"binDir\":\"\",\"binDirs\":[\"/opt/cni/bin\"],\"confDir\":\"/etc/cni/net.d\",\"maxConfNum\":1,\"setupSerially\":false,\"confTemplate\":\"\",\"ipPref\":\"\",\"useInternalLoopback\":false},\"enableSelinux\":false,\"selinuxCategoryRange\":1024,\"maxContainerLogLineSize\":16384,\"disableApparmor\":false,\"restrictOOMScoreAdj\":false,\"disableProcMount\":false,\"unsetSeccompProfile\":\"\",\"tolerateMissingHugetlbController\":true,\"disableHugetlbController\":true,\"device_ownership_from_security_context\":false,\"ignoreImageDefinedVolumes\":false,\"netnsMountsUnderStateDir\":false,\"enableUnprivilegedPorts\":true,\"enableUnprivilegedICMP\":true,\"enableCDI\":true,\"cdiSpecDirs\":[\"/etc/cdi\",\"/var/run/cdi\"],\"drainExecSyncIOTimeout\":\"0s\",\"ignoreDeprecationWarnings\":null,\"containerdRootDir\":\"/tmp/TestRestartMonitor4204381941/001/root\",\"containerdEndpoint\":\"/tmp/TestRestartMonitor4204381941/001/containerd.sock\",\"rootDir\":\"/tmp/TestRestartMonitor4204381941/001/root/io.containerd.grpc.v1.cri\",\"stateDir\":\"/tmp/TestRestartMonitor4204381941/001/state/io.containerd.grpc.v1.cri\"}"
        time="2025-08-19T15:05:45.381513131Z" level=info msg="loading plugin" id=io.containerd.podsandbox.controller.v1.podsandbox type=io.containerd.podsandbox.controller.v1
        time="2025-08-19T15:05:45.381599512Z" level=info msg="loading plugin" id=io.containerd.sandbox.controller.v1.shim type=io.containerd.sandbox.controller.v1
        time="2025-08-19T15:05:45.381750484Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.sandbox-controllers type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.381779869Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.sandboxes type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.381805957Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.snapshots type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.381816758Z" level=info msg="loading plugin" id=io.containerd.streaming.v1.manager type=io.containerd.streaming.v1
        time="2025-08-19T15:05:45.381825835Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.streaming type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.381835863Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.tasks type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.381843658Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.transfer type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.381859758Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.version type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.381874405Z" level=info msg="loading plugin" id=io.containerd.monitor.container.v1.restart type=io.containerd.monitor.container.v1
        time="2025-08-19T15:05:45.381949004Z" level=info msg="loading plugin" id=io.containerd.tracing.processor.v1.otlp type=io.containerd.tracing.processor.v1
        time="2025-08-19T15:05:45.381971797Z" level=info msg="skip loading plugin" error="skip plugin: tracing endpoint not configured" id=io.containerd.tracing.processor.v1.otlp type=io.containerd.tracing.processor.v1
        time="2025-08-19T15:05:45.381981375Z" level=info msg="loading plugin" id=io.containerd.internal.v1.tracing type=io.containerd.internal.v1
        time="2025-08-19T15:05:45.381991724Z" level=info msg="skip loading plugin" error="skip plugin: tracing endpoint not configured" id=io.containerd.internal.v1.tracing type=io.containerd.internal.v1
        time="2025-08-19T15:05:45.382006903Z" level=info msg="loading plugin" id=io.containerd.ttrpc.v1.otelttrpc type=io.containerd.ttrpc.v1
        time="2025-08-19T15:05:45.382016300Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.healthcheck type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.382030827Z" level=info msg="loading plugin" id=io.containerd.nri.v1.nri type=io.containerd.nri.v1
        time="2025-08-19T15:05:45.382049001Z" level=info msg="runtime interface created"
        time="2025-08-19T15:05:45.382055113Z" level=info msg="created NRI interface"
        time="2025-08-19T15:05:45.382061765Z" level=info msg="loading plugin" id=io.containerd.grpc.v1.cri type=io.containerd.grpc.v1
        time="2025-08-19T15:05:45.382068127Z" level=info msg="Connect containerd service"
        time="2025-08-19T15:05:45.382082223Z" level=info msg="using experimental NRI integration - disable nri plugin to prevent this"
        time="2025-08-19T15:05:45.391302319Z" level=info msg="Start subscribing containerd event"
        time="2025-08-19T15:05:45.391359024Z" level=info msg="Start recovering state"
        time="2025-08-19T15:05:45.391479068Z" level=info msg="Start event monitor"
        time="2025-08-19T15:05:45.391482795Z" level=info msg=serving... address=/tmp/TestRestartMonitor4204381941/001/containerd.sock.ttrpc
        time="2025-08-19T15:05:45.391506990Z" level=info msg="Start cni network conf syncer for default"
        time="2025-08-19T15:05:45.391536395Z" level=info msg="Start streaming server"
        time="2025-08-19T15:05:45.391550712Z" level=info msg="Registered namespace \"k8s.io\" with NRI"
        time="2025-08-19T15:05:45.391556713Z" level=info msg="runtime interface starting up..."
        time="2025-08-19T15:05:45.391560751Z" level=info msg="starting plugins..."
        time="2025-08-19T15:05:45.391568846Z" level=info msg="Synchronizing NRI (plugin) with current runtime state"
        time="2025-08-19T15:05:45.391600365Z" level=info msg=serving... address=/tmp/TestRestartMonitor4204381941/001/containerd.sock
        time="2025-08-19T15:05:45.391662320Z" level=info msg="containerd successfully booted in 0.022243s"
        time="2025-08-19T15:05:50.359248219Z" level=info msg="connecting to shim TestRestartMonitor_Always" address="unix:///run/containerd/s/67ba7f3007e580210d5ea75bc37cbffc11313e63790728b0f3f8d2c92664254a" namespace=testing protocol=ttrpc version=3
        time="2025-08-19T15:05:50.427987868Z" level=info msg="shim disconnected" id=TestRestartMonitor_Always namespace=testing
        time="2025-08-19T15:05:50.428068979Z" level=info msg="cleaning up after shim disconnected" id=TestRestartMonitor_Always namespace=testing
        time="2025-08-19T15:05:50.428215683Z" level=info msg="cleaning up dead shim" id=TestRestartMonitor_Always namespace=testing
make: *** [Makefile:224: integration] Error 1
        time="2025-08-19T15:05:50.441753015Z" level=error msg="apply change" error="container \"TestRestartMonitor_Always\" in namespace \"testing\": not found"
        time="2025-08-19T15:05:50.457173574Z" level=info msg="connecting to shim TestRestartMonitor_Paused_Task" address="unix:///run/containerd/s/3169abfc10b5e18bcc935263bf66faa548f5b081a9c696b8f68f1aed9c80dc2f" namespace=testing protocol=ttrpc version=3
        time="2025-08-19T15:06:20.528623251Z" level=info msg="shim disconnected" id=TestRestartMonitor_Paused_Task namespace=testing
        time="2025-08-19T15:06:20.528658326Z" level=info msg="cleaning up after shim disconnected" id=TestRestartMonitor_Paused_Task namespace=testing
        time="2025-08-19T15:06:20.528670679Z" level=info msg="cleaning up dead shim" id=TestRestartMonitor_Paused_Task namespace=testing
        time="2025-08-19T15:06:20.565279345Z" level=info msg="connecting to shim TestRestartMonitor_Failure_Policy" address="unix:///run/containerd/s/b3466b3a7daf92eb94860877aca9481e9056343e57fc62e5108c29c42f7f13e2" namespace=testing protocol=ttrpc version=3
        time="2025-08-19T15:06:25.464527473Z" level=info msg="shim disconnected" id=TestRestartMonitor_Failure_Policy namespace=testing
        time="2025-08-19T15:06:25.464562017Z" level=info msg="cleaning up after shim disconnected" id=TestRestartMonitor_Failure_Policy namespace=testing
        time="2025-08-19T15:06:25.464572257Z" level=info msg="cleaning up dead shim" id=TestRestartMonitor_Failure_Policy namespace=testing
        time="2025-08-19T15:06:25.478817282Z" level=info msg="connecting to shim TestRestartMonitor_Failure_Policy" address="unix:///run/containerd/s/b3466b3a7daf92eb94860877aca9481e9056343e57fc62e5108c29c42f7f13e2" namespace=testing protocol=ttrpc version=3
        time="2025-08-19T15:06:25.525459079Z" level=info msg="shim disconnected" id=TestRestartMonitor_Failure_Policy namespace=testing
        time="2025-08-19T15:06:25.525494335Z" level=info msg="cleaning up after shim disconnected" id=TestRestartMonitor_Failure_Policy namespace=testing
        time="2025-08-19T15:06:25.525506328Z" level=info msg="cleaning up dead shim" id=TestRestartMonitor_Failure_Policy namespace=testing
        time="2025-08-19T15:06:25.534600681Z" level=error msg="copy shim log" error="read /proc/self/fd/14: file already closed" namespace=testing
        time="2025-08-19T15:06:25.538479334Z" level=info msg="Stop CRI service"
        time="2025-08-19T15:06:25.538578284Z" level=info msg="Stop CRI service"
        time="2025-08-19T15:06:25.538624189Z" level=info msg="Event monitor stopped"
        time="2025-08-19T15:06:25.538632135Z" level=info msg="Stream server stopped"
        

DONE 190 tests, 1 skipped, 2 failures in 410.645s